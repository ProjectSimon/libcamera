<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libcamera: libcamera::V4L2VideoDevice Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libcamera
   &#160;<span id="projectnumber">v0.3.2+rpt20241101+6-22e19df9</span>
   </div>
   <div id="projectbrief">Supporting cameras in Linux since 2019</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacelibcamera.html">libcamera</a></li><li class="navelem"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html">V4L2VideoDevice</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classlibcamera_1_1V4L2VideoDevice-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">libcamera::V4L2VideoDevice Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html" title="V4L2VideoDevice object and API.">V4L2VideoDevice</a> object and API.  
 <a href="classlibcamera_1_1V4L2VideoDevice.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for libcamera::V4L2VideoDevice:</div>
<div class="dyncontent">
<div class="center"><img src="classlibcamera_1_1V4L2VideoDevice__inherit__graph.png" border="0" usemap="#alibcamera_1_1V4L2VideoDevice_inherit__map" alt="Inheritance graph"/></div>
<map name="alibcamera_1_1V4L2VideoDevice_inherit__map" id="alibcamera_1_1V4L2VideoDevice_inherit__map">
<area shape="rect" title="V4L2VideoDevice object and API." alt="" coords="5,155,215,181"/>
<area shape="rect" href="classlibcamera_1_1V4L2Device.html" title="Base class for V4L2VideoDevice and V4L2Subdevice." alt="" coords="24,80,196,107"/>
<area shape="rect" href="classlibcamera_1_1Loggable.html" title="Base class to support log message extensions." alt="" coords="33,5,187,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for libcamera::V4L2VideoDevice:</div>
<div class="dyncontent">
<div class="center"><img src="classlibcamera_1_1V4L2VideoDevice__coll__graph.png" border="0" usemap="#alibcamera_1_1V4L2VideoDevice_coll__map" alt="Collaboration graph"/></div>
<map name="alibcamera_1_1V4L2VideoDevice_coll__map" id="alibcamera_1_1V4L2VideoDevice_coll__map">
<area shape="rect" title="V4L2VideoDevice object and API." alt="" coords="851,115,1060,141"/>
<area shape="rect" href="classlibcamera_1_1V4L2Device.html" title="Base class for V4L2VideoDevice and V4L2Subdevice." alt="" coords="629,63,801,89"/>
<area shape="rect" href="classlibcamera_1_1Loggable.html" title="Base class to support log message extensions." alt="" coords="221,5,376,32"/>
<area shape="rect" href="classlibcamera_1_1Signal.html" title=" " alt="" coords="225,57,372,98"/>
<area shape="rect" title=" " alt="" coords="5,123,172,149"/>
<area shape="rect" href="classlibcamera_1_1Signal.html" title="Generic signal and slot communication mechanism." alt="" coords="429,113,576,154"/>
<area shape="rect" href="classlibcamera_1_1Signal.html" title=" " alt="" coords="400,167,605,209"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a028e21c214bae36abe9af7a1a95c991b"><td class="memItemLeft" align="right" valign="top"><a id="a028e21c214bae36abe9af7a1a95c991b"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a028e21c214bae36abe9af7a1a95c991b">Formats</a> = std::map&lt; <a class="el" href="classlibcamera_1_1V4L2PixelFormat.html">V4L2PixelFormat</a>, std::vector&lt; <a class="el" href="classlibcamera_1_1SizeRange.html">SizeRange</a> &gt; &gt;</td></tr>
<tr class="memdesc:a028e21c214bae36abe9af7a1a95c991b"><td class="mdescLeft">&#160;</td><td class="mdescRight">A map of supported V4L2 pixel formats to frame sizes. <br /></td></tr>
<tr class="separator:a028e21c214bae36abe9af7a1a95c991b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a612aca15d344aa5c59f9f90d4cb09e57"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a612aca15d344aa5c59f9f90d4cb09e57">V4L2VideoDevice</a> (const std::string &amp;<a class="el" href="classlibcamera_1_1V4L2Device.html#afa2ad0ec434245d9c5cd910d784764f2">deviceNode</a>)</td></tr>
<tr class="memdesc:a612aca15d344aa5c59f9f90d4cb09e57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html" title="V4L2VideoDevice object and API.">V4L2VideoDevice</a>.  <a href="classlibcamera_1_1V4L2VideoDevice.html#a612aca15d344aa5c59f9f90d4cb09e57">More...</a><br /></td></tr>
<tr class="separator:a612aca15d344aa5c59f9f90d4cb09e57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78fd4cc6f5d062c2392715ae72519377"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a78fd4cc6f5d062c2392715ae72519377">V4L2VideoDevice</a> (const <a class="el" href="classlibcamera_1_1MediaEntity.html">MediaEntity</a> *entity)</td></tr>
<tr class="memdesc:a78fd4cc6f5d062c2392715ae72519377"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html" title="V4L2VideoDevice object and API.">V4L2VideoDevice</a> from a <a class="el" href="classlibcamera_1_1MediaEntity.html" title="The MediaEntity represents an entity in the media graph.">MediaEntity</a>.  <a href="classlibcamera_1_1V4L2VideoDevice.html#a78fd4cc6f5d062c2392715ae72519377">More...</a><br /></td></tr>
<tr class="separator:a78fd4cc6f5d062c2392715ae72519377"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a407058d16f2508b20b88408be08e8581"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a407058d16f2508b20b88408be08e8581">open</a> ()</td></tr>
<tr class="memdesc:a407058d16f2508b20b88408be08e8581"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open the V4L2 video device node and query its capabilities.  <a href="classlibcamera_1_1V4L2VideoDevice.html#a407058d16f2508b20b88408be08e8581">More...</a><br /></td></tr>
<tr class="separator:a407058d16f2508b20b88408be08e8581"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16bd7ee30d2be5f058539a781de4fbc7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a16bd7ee30d2be5f058539a781de4fbc7">open</a> (<a class="el" href="classlibcamera_1_1SharedFD.html">SharedFD</a> handle, enum v4l2_buf_type type)</td></tr>
<tr class="memdesc:a16bd7ee30d2be5f058539a781de4fbc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a V4L2 video device from an opened file handle and query its capabilities.  <a href="classlibcamera_1_1V4L2VideoDevice.html#a16bd7ee30d2be5f058539a781de4fbc7">More...</a><br /></td></tr>
<tr class="separator:a16bd7ee30d2be5f058539a781de4fbc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dc5c057e420ab545411eceb2266e6e9"><td class="memItemLeft" align="right" valign="top"><a id="a9dc5c057e420ab545411eceb2266e6e9"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a9dc5c057e420ab545411eceb2266e6e9">close</a> ()</td></tr>
<tr class="memdesc:a9dc5c057e420ab545411eceb2266e6e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the video device, releasing any resources acquired by <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a407058d16f2508b20b88408be08e8581" title="Open the V4L2 video device node and query its capabilities.">open()</a> <br /></td></tr>
<tr class="separator:a9dc5c057e420ab545411eceb2266e6e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a096f39279b8519b85915bce53e1ec1d6"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a096f39279b8519b85915bce53e1ec1d6">driverName</a> () const</td></tr>
<tr class="memdesc:a096f39279b8519b85915bce53e1ec1d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the name of the V4L2 device driver.  <a href="classlibcamera_1_1V4L2VideoDevice.html#a096f39279b8519b85915bce53e1ec1d6">More...</a><br /></td></tr>
<tr class="separator:a096f39279b8519b85915bce53e1ec1d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fd17456b1e3f24c38ae96879ca6a0a4"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a1fd17456b1e3f24c38ae96879ca6a0a4">deviceName</a> () const</td></tr>
<tr class="memdesc:a1fd17456b1e3f24c38ae96879ca6a0a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the name of the V4L2 video device.  <a href="classlibcamera_1_1V4L2VideoDevice.html#a1fd17456b1e3f24c38ae96879ca6a0a4">More...</a><br /></td></tr>
<tr class="separator:a1fd17456b1e3f24c38ae96879ca6a0a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2362f83341996e9601b2e3fadecda3b"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#aa2362f83341996e9601b2e3fadecda3b">busName</a> () const</td></tr>
<tr class="memdesc:aa2362f83341996e9601b2e3fadecda3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the location of the device in the system.  <a href="classlibcamera_1_1V4L2VideoDevice.html#aa2362f83341996e9601b2e3fadecda3b">More...</a><br /></td></tr>
<tr class="separator:aa2362f83341996e9601b2e3fadecda3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab68bbec27733a99c02673caf059a7ab4"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structlibcamera_1_1V4L2Capability.html">V4L2Capability</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#ab68bbec27733a99c02673caf059a7ab4">caps</a> () const</td></tr>
<tr class="memdesc:ab68bbec27733a99c02673caf059a7ab4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the device V4L2 capabilities.  <a href="classlibcamera_1_1V4L2VideoDevice.html#ab68bbec27733a99c02673caf059a7ab4">More...</a><br /></td></tr>
<tr class="separator:ab68bbec27733a99c02673caf059a7ab4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91f2c87d4f30ad23259b7c460e144f63"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a91f2c87d4f30ad23259b7c460e144f63">getFormat</a> (<a class="el" href="classlibcamera_1_1V4L2DeviceFormat.html">V4L2DeviceFormat</a> *format)</td></tr>
<tr class="memdesc:a91f2c87d4f30ad23259b7c460e144f63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the image format set on the V4L2 video device.  <a href="classlibcamera_1_1V4L2VideoDevice.html#a91f2c87d4f30ad23259b7c460e144f63">More...</a><br /></td></tr>
<tr class="separator:a91f2c87d4f30ad23259b7c460e144f63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e75c2defe1fc70ec05e2cea8d8db4f0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a1e75c2defe1fc70ec05e2cea8d8db4f0">tryFormat</a> (<a class="el" href="classlibcamera_1_1V4L2DeviceFormat.html">V4L2DeviceFormat</a> *format)</td></tr>
<tr class="memdesc:a1e75c2defe1fc70ec05e2cea8d8db4f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try an image format on the V4L2 video device.  <a href="classlibcamera_1_1V4L2VideoDevice.html#a1e75c2defe1fc70ec05e2cea8d8db4f0">More...</a><br /></td></tr>
<tr class="separator:a1e75c2defe1fc70ec05e2cea8d8db4f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad67b47dd9327ce5df43350b80c083cca"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#ad67b47dd9327ce5df43350b80c083cca">setFormat</a> (<a class="el" href="classlibcamera_1_1V4L2DeviceFormat.html">V4L2DeviceFormat</a> *format)</td></tr>
<tr class="memdesc:ad67b47dd9327ce5df43350b80c083cca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure an image format on the V4L2 video device.  <a href="classlibcamera_1_1V4L2VideoDevice.html#ad67b47dd9327ce5df43350b80c083cca">More...</a><br /></td></tr>
<tr class="separator:ad67b47dd9327ce5df43350b80c083cca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc347c736d39fc4029907b47f0ac8a8b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a028e21c214bae36abe9af7a1a95c991b">Formats</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#adc347c736d39fc4029907b47f0ac8a8b">formats</a> (uint32_t code=0)</td></tr>
<tr class="memdesc:adc347c736d39fc4029907b47f0ac8a8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enumerate all pixel formats and frame sizes.  <a href="classlibcamera_1_1V4L2VideoDevice.html#adc347c736d39fc4029907b47f0ac8a8b">More...</a><br /></td></tr>
<tr class="separator:adc347c736d39fc4029907b47f0ac8a8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9eba638ac570ac4746017c6f10fafaa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#aa9eba638ac570ac4746017c6f10fafaa">setSelection</a> (unsigned int target, <a class="el" href="classlibcamera_1_1Rectangle.html">Rectangle</a> *rect)</td></tr>
<tr class="memdesc:aa9eba638ac570ac4746017c6f10fafaa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a selection rectangle <em>rect</em> for <em>target</em>.  <a href="classlibcamera_1_1V4L2VideoDevice.html#aa9eba638ac570ac4746017c6f10fafaa">More...</a><br /></td></tr>
<tr class="separator:aa9eba638ac570ac4746017c6f10fafaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a1a77e5e6c220ea7878e89485864a1c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a3a1a77e5e6c220ea7878e89485864a1c">allocateBuffers</a> (unsigned int count, std::vector&lt; std::unique_ptr&lt; <a class="el" href="classlibcamera_1_1FrameBuffer.html">FrameBuffer</a> &gt;&gt; *buffers)</td></tr>
<tr class="memdesc:a3a1a77e5e6c220ea7878e89485864a1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate and export buffers from the video device.  <a href="classlibcamera_1_1V4L2VideoDevice.html#a3a1a77e5e6c220ea7878e89485864a1c">More...</a><br /></td></tr>
<tr class="separator:a3a1a77e5e6c220ea7878e89485864a1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9c0b0a68f350725b63b73a6da5a2ecd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#ae9c0b0a68f350725b63b73a6da5a2ecd">exportBuffers</a> (unsigned int count, std::vector&lt; std::unique_ptr&lt; <a class="el" href="classlibcamera_1_1FrameBuffer.html">FrameBuffer</a> &gt;&gt; *buffers)</td></tr>
<tr class="memdesc:ae9c0b0a68f350725b63b73a6da5a2ecd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Export buffers from the video device.  <a href="classlibcamera_1_1V4L2VideoDevice.html#ae9c0b0a68f350725b63b73a6da5a2ecd">More...</a><br /></td></tr>
<tr class="separator:ae9c0b0a68f350725b63b73a6da5a2ecd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a154f5283d16ebd5e15d63e212745cb64"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a154f5283d16ebd5e15d63e212745cb64">importBuffers</a> (unsigned int count)</td></tr>
<tr class="memdesc:a154f5283d16ebd5e15d63e212745cb64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare the device to import <em>count</em> buffers.  <a href="classlibcamera_1_1V4L2VideoDevice.html#a154f5283d16ebd5e15d63e212745cb64">More...</a><br /></td></tr>
<tr class="separator:a154f5283d16ebd5e15d63e212745cb64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a191619c152f764e03bc461611f3fcd35"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a191619c152f764e03bc461611f3fcd35">releaseBuffers</a> ()</td></tr>
<tr class="memdesc:a191619c152f764e03bc461611f3fcd35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release resources allocated by <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a3a1a77e5e6c220ea7878e89485864a1c" title="Allocate and export buffers from the video device.">allocateBuffers()</a> or <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a154f5283d16ebd5e15d63e212745cb64" title="Prepare the device to import count buffers.">importBuffers()</a>  <a href="classlibcamera_1_1V4L2VideoDevice.html#a191619c152f764e03bc461611f3fcd35">More...</a><br /></td></tr>
<tr class="separator:a191619c152f764e03bc461611f3fcd35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a594cd594686a8c1cf9ae8dba0b2a8a75"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a594cd594686a8c1cf9ae8dba0b2a8a75">queueBuffer</a> (<a class="el" href="classlibcamera_1_1FrameBuffer.html">FrameBuffer</a> *buffer)</td></tr>
<tr class="memdesc:a594cd594686a8c1cf9ae8dba0b2a8a75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue a buffer to the video device if possible.  <a href="classlibcamera_1_1V4L2VideoDevice.html#a594cd594686a8c1cf9ae8dba0b2a8a75">More...</a><br /></td></tr>
<tr class="separator:a594cd594686a8c1cf9ae8dba0b2a8a75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a588a5dc9d6f4c54c61136ac43ff9a8cc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a588a5dc9d6f4c54c61136ac43ff9a8cc">streamOn</a> ()</td></tr>
<tr class="memdesc:a588a5dc9d6f4c54c61136ac43ff9a8cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the video stream.  <a href="classlibcamera_1_1V4L2VideoDevice.html#a588a5dc9d6f4c54c61136ac43ff9a8cc">More...</a><br /></td></tr>
<tr class="separator:a588a5dc9d6f4c54c61136ac43ff9a8cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61998710615bdf7aa25a046c8565ed66"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a61998710615bdf7aa25a046c8565ed66">streamOff</a> ()</td></tr>
<tr class="memdesc:a61998710615bdf7aa25a046c8565ed66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the video stream.  <a href="classlibcamera_1_1V4L2VideoDevice.html#a61998710615bdf7aa25a046c8565ed66">More...</a><br /></td></tr>
<tr class="separator:a61998710615bdf7aa25a046c8565ed66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36e54adf91b6690c75ce65e46758fc54"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a36e54adf91b6690c75ce65e46758fc54">setDequeueTimeout</a> (<a class="el" href="classlibcamera_1_1utils_1_1Duration.html">utils::Duration</a> timeout)</td></tr>
<tr class="memdesc:a36e54adf91b6690c75ce65e46758fc54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the dequeue timeout value.  <a href="classlibcamera_1_1V4L2VideoDevice.html#a36e54adf91b6690c75ce65e46758fc54">More...</a><br /></td></tr>
<tr class="separator:a36e54adf91b6690c75ce65e46758fc54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac53da48385ab9a3798f7257a94a8ceb0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlibcamera_1_1V4L2PixelFormat.html">V4L2PixelFormat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#ac53da48385ab9a3798f7257a94a8ceb0">toV4L2PixelFormat</a> (const <a class="el" href="classlibcamera_1_1PixelFormat.html">PixelFormat</a> &amp;pixelFormat) const</td></tr>
<tr class="memdesc:ac53da48385ab9a3798f7257a94a8ceb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert <em><a class="el" href="classlibcamera_1_1PixelFormat.html" title="libcamera image pixel format">PixelFormat</a></em> to a <a class="el" href="classlibcamera_1_1V4L2PixelFormat.html" title="V4L2 pixel format FourCC wrapper.">V4L2PixelFormat</a> supported by the device.  <a href="classlibcamera_1_1V4L2VideoDevice.html#ac53da48385ab9a3798f7257a94a8ceb0">More...</a><br /></td></tr>
<tr class="separator:ac53da48385ab9a3798f7257a94a8ceb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classlibcamera_1_1V4L2Device"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classlibcamera_1_1V4L2Device')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classlibcamera_1_1V4L2Device.html">libcamera::V4L2Device</a></td></tr>
<tr class="memitem:a51eaec36a14fcf77950cbeeb6a69593d inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2Device.html#a51eaec36a14fcf77950cbeeb6a69593d">close</a> ()</td></tr>
<tr class="memdesc:a51eaec36a14fcf77950cbeeb6a69593d inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the device node.  <a href="classlibcamera_1_1V4L2Device.html#a51eaec36a14fcf77950cbeeb6a69593d">More...</a><br /></td></tr>
<tr class="separator:a51eaec36a14fcf77950cbeeb6a69593d inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a1cbbf505ca93672c6f8086c2a9e3a0 inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2Device.html#a1a1cbbf505ca93672c6f8086c2a9e3a0">isOpen</a> () const</td></tr>
<tr class="memdesc:a1a1cbbf505ca93672c6f8086c2a9e3a0 inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the V4L2 device node is open.  <a href="classlibcamera_1_1V4L2Device.html#a1a1cbbf505ca93672c6f8086c2a9e3a0">More...</a><br /></td></tr>
<tr class="separator:a1a1cbbf505ca93672c6f8086c2a9e3a0 inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3da981578e5d7f23032bd902597c3a15 inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classlibcamera_1_1ControlInfoMap.html">ControlInfoMap</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2Device.html#a3da981578e5d7f23032bd902597c3a15">controls</a> () const</td></tr>
<tr class="memdesc:a3da981578e5d7f23032bd902597c3a15 inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the supported V4L2 controls and their information.  <a href="classlibcamera_1_1V4L2Device.html#a3da981578e5d7f23032bd902597c3a15">More...</a><br /></td></tr>
<tr class="separator:a3da981578e5d7f23032bd902597c3a15 inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaadfb4e56d3099f9a84fa0a7a3fec50 inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlibcamera_1_1ControlList.html">ControlList</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2Device.html#aaaadfb4e56d3099f9a84fa0a7a3fec50">getControls</a> (const std::vector&lt; uint32_t &gt; &amp;ids)</td></tr>
<tr class="memdesc:aaaadfb4e56d3099f9a84fa0a7a3fec50 inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read controls from the device.  <a href="classlibcamera_1_1V4L2Device.html#aaaadfb4e56d3099f9a84fa0a7a3fec50">More...</a><br /></td></tr>
<tr class="separator:aaaadfb4e56d3099f9a84fa0a7a3fec50 inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0485054b749a15cb5152cc751c81750 inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2Device.html#ab0485054b749a15cb5152cc751c81750">setControls</a> (<a class="el" href="classlibcamera_1_1ControlList.html">ControlList</a> *ctrls)</td></tr>
<tr class="memdesc:ab0485054b749a15cb5152cc751c81750 inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write controls to the device.  <a href="classlibcamera_1_1V4L2Device.html#ab0485054b749a15cb5152cc751c81750">More...</a><br /></td></tr>
<tr class="separator:ab0485054b749a15cb5152cc751c81750 inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf0ec992186e2a248c810e9c42bd5794 inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="memItemLeft" align="right" valign="top">const struct v4l2_query_ext_ctrl *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2Device.html#acf0ec992186e2a248c810e9c42bd5794">controlInfo</a> (uint32_t id) const</td></tr>
<tr class="memdesc:acf0ec992186e2a248c810e9c42bd5794 inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the v4l2_query_ext_ctrl information for the given control.  <a href="classlibcamera_1_1V4L2Device.html#acf0ec992186e2a248c810e9c42bd5794">More...</a><br /></td></tr>
<tr class="separator:acf0ec992186e2a248c810e9c42bd5794 inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa2ad0ec434245d9c5cd910d784764f2 inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="memItemLeft" align="right" valign="top">const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2Device.html#afa2ad0ec434245d9c5cd910d784764f2">deviceNode</a> () const</td></tr>
<tr class="memdesc:afa2ad0ec434245d9c5cd910d784764f2 inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the device node path.  <a href="classlibcamera_1_1V4L2Device.html#afa2ad0ec434245d9c5cd910d784764f2">More...</a><br /></td></tr>
<tr class="separator:afa2ad0ec434245d9c5cd910d784764f2 inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8454df564fffa7ad160468709aa172ff inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2Device.html#a8454df564fffa7ad160468709aa172ff">devicePath</a> () const</td></tr>
<tr class="memdesc:a8454df564fffa7ad160468709aa172ff inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the device path in sysfs.  <a href="classlibcamera_1_1V4L2Device.html#a8454df564fffa7ad160468709aa172ff">More...</a><br /></td></tr>
<tr class="separator:a8454df564fffa7ad160468709aa172ff inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22b82e6fa7c29f792c6458eba30fd135 inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2Device.html#a22b82e6fa7c29f792c6458eba30fd135">setFrameStartEnabled</a> (bool enable)</td></tr>
<tr class="memdesc:a22b82e6fa7c29f792c6458eba30fd135 inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable or disable frame start event notification.  <a href="classlibcamera_1_1V4L2Device.html#a22b82e6fa7c29f792c6458eba30fd135">More...</a><br /></td></tr>
<tr class="separator:a22b82e6fa7c29f792c6458eba30fd135 inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52bc2f8287edb89748a1fc88c3b684ee inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2Device.html#a52bc2f8287edb89748a1fc88c3b684ee">updateControlInfo</a> ()</td></tr>
<tr class="memdesc:a52bc2f8287edb89748a1fc88c3b684ee inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the information for all device controls.  <a href="classlibcamera_1_1V4L2Device.html#a52bc2f8287edb89748a1fc88c3b684ee">More...</a><br /></td></tr>
<tr class="separator:a52bc2f8287edb89748a1fc88c3b684ee inherit pub_methods_classlibcamera_1_1V4L2Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:aa9c5f20a82893665448ca8c22f184217"><td class="memItemLeft" align="right" valign="top">static std::unique_ptr&lt; <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html">V4L2VideoDevice</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#aa9c5f20a82893665448ca8c22f184217">fromEntityName</a> (const <a class="el" href="classlibcamera_1_1MediaDevice.html">MediaDevice</a> *media, const std::string &amp;entity)</td></tr>
<tr class="memdesc:aa9c5f20a82893665448ca8c22f184217"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new video device instance from <em>entity</em> in media device <em>media</em>.  <a href="classlibcamera_1_1V4L2VideoDevice.html#aa9c5f20a82893665448ca8c22f184217">More...</a><br /></td></tr>
<tr class="separator:aa9c5f20a82893665448ca8c22f184217"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:abce3a9e7d618c826945b1a8a5c086ebe"><td class="memItemLeft" align="right" valign="top"><a id="abce3a9e7d618c826945b1a8a5c086ebe"></a>
<a class="el" href="classlibcamera_1_1Signal.html">Signal</a>&lt; <a class="el" href="classlibcamera_1_1FrameBuffer.html">FrameBuffer</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#abce3a9e7d618c826945b1a8a5c086ebe">bufferReady</a></td></tr>
<tr class="memdesc:abce3a9e7d618c826945b1a8a5c086ebe"><td class="mdescLeft">&#160;</td><td class="mdescRight">A <a class="el" href="classlibcamera_1_1Signal.html" title="Generic signal and slot communication mechanism.">Signal</a> emitted when a framebuffer completes. <br /></td></tr>
<tr class="separator:abce3a9e7d618c826945b1a8a5c086ebe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04808f0cc1ed33c6796a98fbdc8603f1"><td class="memItemLeft" align="right" valign="top"><a id="a04808f0cc1ed33c6796a98fbdc8603f1"></a>
<a class="el" href="classlibcamera_1_1Signal.html">Signal</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a04808f0cc1ed33c6796a98fbdc8603f1">dequeueTimeout</a></td></tr>
<tr class="memdesc:a04808f0cc1ed33c6796a98fbdc8603f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">A <a class="el" href="classlibcamera_1_1Signal.html" title="Generic signal and slot communication mechanism.">Signal</a> emitted when the dequeue watchdog timer expires. <br /></td></tr>
<tr class="separator:a04808f0cc1ed33c6796a98fbdc8603f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_attribs_classlibcamera_1_1V4L2Device"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_classlibcamera_1_1V4L2Device')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="classlibcamera_1_1V4L2Device.html">libcamera::V4L2Device</a></td></tr>
<tr class="memitem:a57ed50c44d1cd5c2cedab9b42e087e6c inherit pub_attribs_classlibcamera_1_1V4L2Device"><td class="memItemLeft" align="right" valign="top"><a id="a57ed50c44d1cd5c2cedab9b42e087e6c"></a>
<a class="el" href="classlibcamera_1_1Signal.html">Signal</a>&lt; uint32_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2Device.html#a57ed50c44d1cd5c2cedab9b42e087e6c">frameStart</a></td></tr>
<tr class="memdesc:a57ed50c44d1cd5c2cedab9b42e087e6c inherit pub_attribs_classlibcamera_1_1V4L2Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">A <a class="el" href="classlibcamera_1_1Signal.html" title="Generic signal and slot communication mechanism.">Signal</a> emitted when capture of a frame has started. <br /></td></tr>
<tr class="separator:a57ed50c44d1cd5c2cedab9b42e087e6c inherit pub_attribs_classlibcamera_1_1V4L2Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a26a10690790249684e707cbfd1d83d77"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a26a10690790249684e707cbfd1d83d77">logPrefix</a> () const override</td></tr>
<tr class="memdesc:a26a10690790249684e707cbfd1d83d77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve a string to be prefixed to the log message.  <a href="classlibcamera_1_1V4L2VideoDevice.html#a26a10690790249684e707cbfd1d83d77">More...</a><br /></td></tr>
<tr class="separator:a26a10690790249684e707cbfd1d83d77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classlibcamera_1_1V4L2Device"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classlibcamera_1_1V4L2Device')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classlibcamera_1_1V4L2Device.html">libcamera::V4L2Device</a></td></tr>
<tr class="memitem:af2c3423ffe8a3333ea7c82018b49844d inherit pro_methods_classlibcamera_1_1V4L2Device"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2Device.html#af2c3423ffe8a3333ea7c82018b49844d">V4L2Device</a> (const std::string &amp;<a class="el" href="classlibcamera_1_1V4L2Device.html#afa2ad0ec434245d9c5cd910d784764f2">deviceNode</a>)</td></tr>
<tr class="memdesc:af2c3423ffe8a3333ea7c82018b49844d inherit pro_methods_classlibcamera_1_1V4L2Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a <a class="el" href="classlibcamera_1_1V4L2Device.html" title="Base class for V4L2VideoDevice and V4L2Subdevice.">V4L2Device</a>.  <a href="classlibcamera_1_1V4L2Device.html#af2c3423ffe8a3333ea7c82018b49844d">More...</a><br /></td></tr>
<tr class="separator:af2c3423ffe8a3333ea7c82018b49844d inherit pro_methods_classlibcamera_1_1V4L2Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01e90d3566abf2e6299a31989d060f08 inherit pro_methods_classlibcamera_1_1V4L2Device"><td class="memItemLeft" align="right" valign="top"><a id="a01e90d3566abf2e6299a31989d060f08"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2Device.html#a01e90d3566abf2e6299a31989d060f08">~V4L2Device</a> ()</td></tr>
<tr class="memdesc:a01e90d3566abf2e6299a31989d060f08 inherit pro_methods_classlibcamera_1_1V4L2Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy a <a class="el" href="classlibcamera_1_1V4L2Device.html" title="Base class for V4L2VideoDevice and V4L2Subdevice.">V4L2Device</a>. <br /></td></tr>
<tr class="separator:a01e90d3566abf2e6299a31989d060f08 inherit pro_methods_classlibcamera_1_1V4L2Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cdee8ca74669a21480dbce6568551ec inherit pro_methods_classlibcamera_1_1V4L2Device"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2Device.html#a5cdee8ca74669a21480dbce6568551ec">open</a> (unsigned int flags)</td></tr>
<tr class="memdesc:a5cdee8ca74669a21480dbce6568551ec inherit pro_methods_classlibcamera_1_1V4L2Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a V4L2 device node.  <a href="classlibcamera_1_1V4L2Device.html#a5cdee8ca74669a21480dbce6568551ec">More...</a><br /></td></tr>
<tr class="separator:a5cdee8ca74669a21480dbce6568551ec inherit pro_methods_classlibcamera_1_1V4L2Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5143b4bba37aea67885c61a2b3850d2 inherit pro_methods_classlibcamera_1_1V4L2Device"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2Device.html#ab5143b4bba37aea67885c61a2b3850d2">setFd</a> (<a class="el" href="classlibcamera_1_1UniqueFD.html">UniqueFD</a> <a class="el" href="classlibcamera_1_1V4L2Device.html#a6b77845cf4b1eddcfc8fdeabf1795f82">fd</a>)</td></tr>
<tr class="memdesc:ab5143b4bba37aea67885c61a2b3850d2 inherit pro_methods_classlibcamera_1_1V4L2Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the file descriptor of a V4L2 device.  <a href="classlibcamera_1_1V4L2Device.html#ab5143b4bba37aea67885c61a2b3850d2">More...</a><br /></td></tr>
<tr class="separator:ab5143b4bba37aea67885c61a2b3850d2 inherit pro_methods_classlibcamera_1_1V4L2Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34c8a36a4c3d22beb3bf173f7c498d2d inherit pro_methods_classlibcamera_1_1V4L2Device"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2Device.html#a34c8a36a4c3d22beb3bf173f7c498d2d">ioctl</a> (unsigned long request, void *argp)</td></tr>
<tr class="memdesc:a34c8a36a4c3d22beb3bf173f7c498d2d inherit pro_methods_classlibcamera_1_1V4L2Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform an IOCTL system call on the device node.  <a href="classlibcamera_1_1V4L2Device.html#a34c8a36a4c3d22beb3bf173f7c498d2d">More...</a><br /></td></tr>
<tr class="separator:a34c8a36a4c3d22beb3bf173f7c498d2d inherit pro_methods_classlibcamera_1_1V4L2Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b77845cf4b1eddcfc8fdeabf1795f82 inherit pro_methods_classlibcamera_1_1V4L2Device"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2Device.html#a6b77845cf4b1eddcfc8fdeabf1795f82">fd</a> () const</td></tr>
<tr class="memdesc:a6b77845cf4b1eddcfc8fdeabf1795f82 inherit pro_methods_classlibcamera_1_1V4L2Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the V4L2 device file descriptor.  <a href="classlibcamera_1_1V4L2Device.html#a6b77845cf4b1eddcfc8fdeabf1795f82">More...</a><br /></td></tr>
<tr class="separator:a6b77845cf4b1eddcfc8fdeabf1795f82 inherit pro_methods_classlibcamera_1_1V4L2Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classlibcamera_1_1Loggable"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classlibcamera_1_1Loggable')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classlibcamera_1_1Loggable.html">libcamera::Loggable</a></td></tr>
<tr class="memitem:a56b00f844b75b5d08cad898ed9c6181e inherit pro_methods_classlibcamera_1_1Loggable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlibcamera_1_1LogMessage.html">LogMessage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1Loggable.html#a56b00f844b75b5d08cad898ed9c6181e">_log</a> (const <a class="el" href="classlibcamera_1_1LogCategory.html">LogCategory</a> *category, <a class="el" href="namespacelibcamera.html#a68f26f5a54a5bb105f2e7422215a0ca3">LogSeverity</a> severity, const char *fileName=__builtin_FILE(), unsigned int line=__builtin_LINE()) const</td></tr>
<tr class="memdesc:a56b00f844b75b5d08cad898ed9c6181e inherit pro_methods_classlibcamera_1_1Loggable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a temporary <a class="el" href="classlibcamera_1_1LogMessage.html" title="Internal log message representation.">LogMessage</a> object to log a message.  <a href="classlibcamera_1_1Loggable.html#a56b00f844b75b5d08cad898ed9c6181e">More...</a><br /></td></tr>
<tr class="separator:a56b00f844b75b5d08cad898ed9c6181e inherit pro_methods_classlibcamera_1_1Loggable"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_static_methods_classlibcamera_1_1V4L2Device"><td colspan="2" onclick="javascript:toggleInherit('pro_static_methods_classlibcamera_1_1V4L2Device')"><img src="closed.png" alt="-"/>&#160;Static Protected Member Functions inherited from <a class="el" href="classlibcamera_1_1V4L2Device.html">libcamera::V4L2Device</a></td></tr>
<tr class="memitem:ac6fba98c260ee82f4d82c0da6a34166e inherit pro_static_methods_classlibcamera_1_1V4L2Device"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:ac6fba98c260ee82f4d82c0da6a34166e inherit pro_static_methods_classlibcamera_1_1V4L2Device"><td class="memTemplItemLeft" align="right" valign="top">static std::optional&lt; <a class="el" href="classlibcamera_1_1ColorSpace.html">ColorSpace</a> &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2Device.html#ac6fba98c260ee82f4d82c0da6a34166e">toColorSpace</a> (const T &amp;v4l2Format, <a class="el" href="classlibcamera_1_1PixelFormatInfo.html#a021bf0e82baec37b1523baa3322dc23c">PixelFormatInfo::ColourEncoding</a> colourEncoding)</td></tr>
<tr class="memdesc:ac6fba98c260ee82f4d82c0da6a34166e inherit pro_static_methods_classlibcamera_1_1V4L2Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert the color space fields in a V4L2 format to a <a class="el" href="classlibcamera_1_1ColorSpace.html" title="Class to describe a color space.">ColorSpace</a>.  <a href="classlibcamera_1_1V4L2Device.html#ac6fba98c260ee82f4d82c0da6a34166e">More...</a><br /></td></tr>
<tr class="separator:ac6fba98c260ee82f4d82c0da6a34166e inherit pro_static_methods_classlibcamera_1_1V4L2Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b2d0bf205d45b91c6945018e92f3933 inherit pro_static_methods_classlibcamera_1_1V4L2Device"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a3b2d0bf205d45b91c6945018e92f3933 inherit pro_static_methods_classlibcamera_1_1V4L2Device"><td class="memTemplItemLeft" align="right" valign="top">static int&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2Device.html#a3b2d0bf205d45b91c6945018e92f3933">fromColorSpace</a> (const std::optional&lt; <a class="el" href="classlibcamera_1_1ColorSpace.html">ColorSpace</a> &gt; &amp;colorSpace, T &amp;v4l2Format)</td></tr>
<tr class="memdesc:a3b2d0bf205d45b91c6945018e92f3933 inherit pro_static_methods_classlibcamera_1_1V4L2Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill in the color space fields of a V4L2 format from a <a class="el" href="classlibcamera_1_1ColorSpace.html" title="Class to describe a color space.">ColorSpace</a>.  <a href="classlibcamera_1_1V4L2Device.html#a3b2d0bf205d45b91c6945018e92f3933">More...</a><br /></td></tr>
<tr class="separator:a3b2d0bf205d45b91c6945018e92f3933 inherit pro_static_methods_classlibcamera_1_1V4L2Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html" title="V4L2VideoDevice object and API.">V4L2VideoDevice</a> object and API. </p>
<p>The <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html" title="V4L2VideoDevice object and API.">V4L2VideoDevice</a> class models an instance of a V4L2 video device. It is constructed with the path to a V4L2 video device node. The device node is only opened upon a call to <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a407058d16f2508b20b88408be08e8581" title="Open the V4L2 video device node and query its capabilities.">open()</a> which must be checked for success.</p>
<p>The video device capabilities are validated when the device is opened and the device is rejected if it is not a suitable V4L2 capture or output video device, or if the video device does not support streaming I/O.</p>
<p>No API call other than <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a407058d16f2508b20b88408be08e8581" title="Open the V4L2 video device node and query its capabilities.">open()</a>, <a class="el" href="classlibcamera_1_1V4L2Device.html#a1a1cbbf505ca93672c6f8086c2a9e3a0" title="Check if the V4L2 device node is open.">isOpen()</a> and <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a9dc5c057e420ab545411eceb2266e6e9" title="Close the video device, releasing any resources acquired by open()">close()</a> shall be called on an unopened device instance.</p>
<p>The <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html" title="V4L2VideoDevice object and API.">V4L2VideoDevice</a> class supports the V4L2 MMAP and DMABUF memory types:</p>
<ul>
<li><p class="startli">The <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a3a1a77e5e6c220ea7878e89485864a1c" title="Allocate and export buffers from the video device.">allocateBuffers()</a> function wraps buffer allocation with the V4L2 MMAP memory type. It requests buffers from the driver, allocating the corresponding memory, and exports them as a set of <a class="el" href="classlibcamera_1_1FrameBuffer.html" title="Frame buffer data and its associated dynamic metadata.">FrameBuffer</a> objects. Upon successful return the driver's internal buffer management is initialized in MMAP mode, and the video device is ready to accept <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a594cd594686a8c1cf9ae8dba0b2a8a75" title="Queue a buffer to the video device if possible.">queueBuffer()</a> calls.</p>
<p class="startli">This is the most traditional V4L2 buffer management, and is mostly useful to support internal buffer pools in pipeline handlers, either for CPU consumption (such as statistics or parameters pools), or for internal image buffers shared between devices.</p>
</li>
<li><p class="startli">The <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#ae9c0b0a68f350725b63b73a6da5a2ecd" title="Export buffers from the video device.">exportBuffers()</a> function operates similarly to <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a3a1a77e5e6c220ea7878e89485864a1c" title="Allocate and export buffers from the video device.">allocateBuffers()</a>, but leaves the driver's internal buffer management uninitialized. It uses the V4L2 buffer orphaning support to allocate buffers with the MMAP method, export them as a set of <a class="el" href="classlibcamera_1_1FrameBuffer.html" title="Frame buffer data and its associated dynamic metadata.">FrameBuffer</a> objects, and reset the driver's internal buffer management. The video device shall be initialized with <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a154f5283d16ebd5e15d63e212745cb64" title="Prepare the device to import count buffers.">importBuffers()</a> or <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a3a1a77e5e6c220ea7878e89485864a1c" title="Allocate and export buffers from the video device.">allocateBuffers()</a> before it can accept <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a594cd594686a8c1cf9ae8dba0b2a8a75" title="Queue a buffer to the video device if possible.">queueBuffer()</a> calls. The exported buffers are directly usable with any V4L2 video device in DMABUF mode, or with other dmabuf importers.</p>
<p class="startli">This method is mostly useful to implement buffer allocation helpers or to allocate ancillary buffers, when a V4L2 video device is used in DMABUF mode but no other source of buffers is available. An example use case would be allocation of scratch buffers to be used in case of buffer underruns on a video device that is otherwise supplied with external buffers.</p>
</li>
<li><p class="startli">The <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a154f5283d16ebd5e15d63e212745cb64" title="Prepare the device to import count buffers.">importBuffers()</a> function initializes the driver's buffer management to import buffers in DMABUF mode. It requests buffers from the driver, but doesn't allocate memory. Upon successful return, the video device is ready to accept <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a594cd594686a8c1cf9ae8dba0b2a8a75" title="Queue a buffer to the video device if possible.">queueBuffer()</a> calls. The buffers to be imported are provided to <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a594cd594686a8c1cf9ae8dba0b2a8a75" title="Queue a buffer to the video device if possible.">queueBuffer()</a>, and may be supplied externally, or come from a previous <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#ae9c0b0a68f350725b63b73a6da5a2ecd" title="Export buffers from the video device.">exportBuffers()</a> call.</p>
<p class="startli">This is the usual buffers initialization method for video devices whose buffers are exposed outside of libcamera. It is also typically used on one of the two video device that participate in buffer sharing inside pipelines, the other video device typically using <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a3a1a77e5e6c220ea7878e89485864a1c" title="Allocate and export buffers from the video device.">allocateBuffers()</a>.</p>
</li>
<li>The <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a191619c152f764e03bc461611f3fcd35" title="Release resources allocated by allocateBuffers() or importBuffers()">releaseBuffers()</a> function resets the driver's internal buffer management that was initialized by a previous call to <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a3a1a77e5e6c220ea7878e89485864a1c" title="Allocate and export buffers from the video device.">allocateBuffers()</a> or <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a154f5283d16ebd5e15d63e212745cb64" title="Prepare the device to import count buffers.">importBuffers()</a>. Any memory allocated by <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a3a1a77e5e6c220ea7878e89485864a1c" title="Allocate and export buffers from the video device.">allocateBuffers()</a> is freed. Buffer exported by <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#ae9c0b0a68f350725b63b73a6da5a2ecd" title="Export buffers from the video device.">exportBuffers()</a> are not affected by this function.</li>
</ul>
<p>The <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html" title="V4L2VideoDevice object and API.">V4L2VideoDevice</a> class tracks queued buffers and handles buffer events. It automatically dequeues completed buffers and emits the <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#abce3a9e7d618c826945b1a8a5c086ebe">bufferReady</a> signal.</p>
<p>Upon destruction any device left open will be closed, and any resources released.</p>
<dl class="context"><dt><b><a class="el" href="context.html#_context000061">Thread Safety:</a></b></dt><dd>This class is <a class="el" href="thread-safety.html#thread-bound">thread-bound</a>. </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a612aca15d344aa5c59f9f90d4cb09e57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a612aca15d344aa5c59f9f90d4cb09e57">&#9670;&nbsp;</a></span>V4L2VideoDevice() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">libcamera::V4L2VideoDevice::V4L2VideoDevice </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>deviceNode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html" title="V4L2VideoDevice object and API.">V4L2VideoDevice</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">deviceNode</td><td>The file-system path to the video device node </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a78fd4cc6f5d062c2392715ae72519377"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78fd4cc6f5d062c2392715ae72519377">&#9670;&nbsp;</a></span>V4L2VideoDevice() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">libcamera::V4L2VideoDevice::V4L2VideoDevice </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classlibcamera_1_1MediaEntity.html">MediaEntity</a> *&#160;</td>
          <td class="paramname"><em>entity</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html" title="V4L2VideoDevice object and API.">V4L2VideoDevice</a> from a <a class="el" href="classlibcamera_1_1MediaEntity.html" title="The MediaEntity represents an entity in the media graph.">MediaEntity</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">entity</td><td>The <a class="el" href="classlibcamera_1_1MediaEntity.html" title="The MediaEntity represents an entity in the media graph.">MediaEntity</a> to build the video device from</td></tr>
  </table>
  </dd>
</dl>
<p>Construct a <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html" title="V4L2VideoDevice object and API.">V4L2VideoDevice</a> from a <a class="el" href="classlibcamera_1_1MediaEntity.html" title="The MediaEntity represents an entity in the media graph.">MediaEntity</a>'s device node path. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3a1a77e5e6c220ea7878e89485864a1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a1a77e5e6c220ea7878e89485864a1c">&#9670;&nbsp;</a></span>allocateBuffers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int libcamera::V4L2VideoDevice::allocateBuffers </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::unique_ptr&lt; <a class="el" href="classlibcamera_1_1FrameBuffer.html">FrameBuffer</a> &gt;&gt; *&#160;</td>
          <td class="paramname"><em>buffers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate and export buffers from the video device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">count</td><td>Number of buffers to allocate </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buffers</td><td>Vector to store allocated buffers</td></tr>
  </table>
  </dd>
</dl>
<p>This function wraps buffer allocation with the V4L2 MMAP memory type. It requests <em>count</em> buffers from the driver, allocating the corresponding memory, and exports them as a set of <a class="el" href="classlibcamera_1_1FrameBuffer.html" title="Frame buffer data and its associated dynamic metadata.">FrameBuffer</a> objects in <em>buffers</em>. Upon successful return the driver's internal buffer management is initialized in MMAP mode, and the video device is ready to accept <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a594cd594686a8c1cf9ae8dba0b2a8a75" title="Queue a buffer to the video device if possible.">queueBuffer()</a> calls.</p>
<p>The number of planes and their offsets and sizes are determined by the currently active format on the device as set by <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#ad67b47dd9327ce5df43350b80c083cca" title="Configure an image format on the V4L2 video device.">setFormat()</a>. They do not map to the V4L2 buffer planes, but to colour planes of the pixel format. For instance, if the active format is formats::NV12, the allocated <a class="el" href="classlibcamera_1_1FrameBuffer.html" title="Frame buffer data and its associated dynamic metadata.">FrameBuffer</a> instances will have two planes, for the luma and chroma components, regardless of whether the device uses V4L2_PIX_FMT_NV12 or V4L2_PIX_FMT_NV12M.</p>
<p>Buffers allocated with this function shall later be free with <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a191619c152f764e03bc461611f3fcd35" title="Release resources allocated by allocateBuffers() or importBuffers()">releaseBuffers()</a>. If buffers have already been allocated with <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a3a1a77e5e6c220ea7878e89485864a1c" title="Allocate and export buffers from the video device.">allocateBuffers()</a> or imported with <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a154f5283d16ebd5e15d63e212745cb64" title="Prepare the device to import count buffers.">importBuffers()</a>, this function returns -EBUSY.</p>
<dl class="section return"><dt>Returns</dt><dd>The number of allocated buffers on success or a negative error code otherwise </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-EBUSY</td><td>buffers have already been allocated or imported </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa2362f83341996e9601b2e3fadecda3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2362f83341996e9601b2e3fadecda3b">&#9670;&nbsp;</a></span>busName()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">libcamera::V4L2VideoDevice::busName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the location of the device in the system. </p>
<dl class="section return"><dt>Returns</dt><dd>The string containing the device location </dd></dl>

</div>
</div>
<a id="ab68bbec27733a99c02673caf059a7ab4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab68bbec27733a99c02673caf059a7ab4">&#9670;&nbsp;</a></span>caps()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">libcamera::V4L2VideoDevice::caps </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the device V4L2 capabilities. </p>
<dl class="section return"><dt>Returns</dt><dd>The device V4L2 capabilities </dd></dl>

</div>
</div>
<a id="a1fd17456b1e3f24c38ae96879ca6a0a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fd17456b1e3f24c38ae96879ca6a0a4">&#9670;&nbsp;</a></span>deviceName()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">libcamera::V4L2VideoDevice::deviceName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the name of the V4L2 video device. </p>
<dl class="section return"><dt>Returns</dt><dd>The string containing the device name </dd></dl>

</div>
</div>
<a id="a096f39279b8519b85915bce53e1ec1d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a096f39279b8519b85915bce53e1ec1d6">&#9670;&nbsp;</a></span>driverName()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">libcamera::V4L2VideoDevice::driverName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the name of the V4L2 device driver. </p>
<dl class="section return"><dt>Returns</dt><dd>The string containing the driver name </dd></dl>

</div>
</div>
<a id="ae9c0b0a68f350725b63b73a6da5a2ecd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9c0b0a68f350725b63b73a6da5a2ecd">&#9670;&nbsp;</a></span>exportBuffers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int libcamera::V4L2VideoDevice::exportBuffers </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::unique_ptr&lt; <a class="el" href="classlibcamera_1_1FrameBuffer.html">FrameBuffer</a> &gt;&gt; *&#160;</td>
          <td class="paramname"><em>buffers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Export buffers from the video device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">count</td><td>Number of buffers to allocate </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buffers</td><td>Vector to store allocated buffers</td></tr>
  </table>
  </dd>
</dl>
<p>This function allocates <em>count</em> buffer from the video device and exports them as dmabuf objects, stored in <em>buffers</em>. Unlike <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a3a1a77e5e6c220ea7878e89485864a1c" title="Allocate and export buffers from the video device.">allocateBuffers()</a>, this function leaves the driver's internal buffer management uninitialized. The video device shall be initialized with <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a154f5283d16ebd5e15d63e212745cb64" title="Prepare the device to import count buffers.">importBuffers()</a> or <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a3a1a77e5e6c220ea7878e89485864a1c" title="Allocate and export buffers from the video device.">allocateBuffers()</a> before it can accept <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a594cd594686a8c1cf9ae8dba0b2a8a75" title="Queue a buffer to the video device if possible.">queueBuffer()</a> calls. The exported buffers are directly usable with any V4L2 video device in DMABUF mode, or with other dmabuf importers.</p>
<p>The number of planes and their offsets and sizes are determined by the currently active format on the device as set by <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#ad67b47dd9327ce5df43350b80c083cca" title="Configure an image format on the V4L2 video device.">setFormat()</a>. They do not map to the V4L2 buffer planes, but to colour planes of the pixel format. For instance, if the active format is formats::NV12, the allocated <a class="el" href="classlibcamera_1_1FrameBuffer.html" title="Frame buffer data and its associated dynamic metadata.">FrameBuffer</a> instances will have two planes, for the luma and chroma components, regardless of whether the device uses V4L2_PIX_FMT_NV12 or V4L2_PIX_FMT_NV12M.</p>
<p>Multiple independent sets of buffers can be allocated with multiple calls to this function. Device-specific limitations may apply regarding the minimum and maximum number of buffers per set, or to total amount of allocated memory. The exported dmabuf lifetime is tied to the returned <em>buffers</em>. To free a buffer, the caller shall delete the corresponding <a class="el" href="classlibcamera_1_1FrameBuffer.html" title="Frame buffer data and its associated dynamic metadata.">FrameBuffer</a> instance. No bookkeeping and automatic free is performed by the <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html" title="V4L2VideoDevice object and API.">V4L2VideoDevice</a> class.</p>
<p>If buffers have already been allocated with <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a3a1a77e5e6c220ea7878e89485864a1c" title="Allocate and export buffers from the video device.">allocateBuffers()</a> or imported with <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a154f5283d16ebd5e15d63e212745cb64" title="Prepare the device to import count buffers.">importBuffers()</a>, this function returns -EBUSY.</p>
<dl class="section return"><dt>Returns</dt><dd>The number of allocated buffers on success or a negative error code otherwise </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-EBUSY</td><td>buffers have already been allocated or imported </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adc347c736d39fc4029907b47f0ac8a8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc347c736d39fc4029907b47f0ac8a8b">&#9670;&nbsp;</a></span>formats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a028e21c214bae36abe9af7a1a95c991b">V4L2VideoDevice::Formats</a> libcamera::V4L2VideoDevice::formats </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>code</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enumerate all pixel formats and frame sizes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">code</td><td>Restrict formats to this media bus code.</td></tr>
  </table>
  </dd>
</dl>
<p>Enumerate all pixel formats and frame sizes supported by the video device. If the <em>code</em> argument is not zero, only formats compatible with that media bus code will be enumerated.</p>
<dl class="section return"><dt>Returns</dt><dd>A list of the supported video device formats </dd></dl>

</div>
</div>
<a id="aa9c5f20a82893665448ca8c22f184217"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9c5f20a82893665448ca8c22f184217">&#9670;&nbsp;</a></span>fromEntityName()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt; <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html">V4L2VideoDevice</a> &gt; libcamera::V4L2VideoDevice::fromEntityName </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classlibcamera_1_1MediaDevice.html">MediaDevice</a> *&#160;</td>
          <td class="paramname"><em>media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>entity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new video device instance from <em>entity</em> in media device <em>media</em>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">media</td><td>The media device where the entity is registered </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">entity</td><td>The media entity name</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A newly created <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html" title="V4L2VideoDevice object and API.">V4L2VideoDevice</a> on success, nullptr otherwise </dd></dl>

</div>
</div>
<a id="a91f2c87d4f30ad23259b7c460e144f63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91f2c87d4f30ad23259b7c460e144f63">&#9670;&nbsp;</a></span>getFormat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int libcamera::V4L2VideoDevice::getFormat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlibcamera_1_1V4L2DeviceFormat.html">V4L2DeviceFormat</a> *&#160;</td>
          <td class="paramname"><em>format</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the image format set on the V4L2 video device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">format</td><td>The image format applied on the video device </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success or a negative error code otherwise </dd></dl>

</div>
</div>
<a id="a154f5283d16ebd5e15d63e212745cb64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a154f5283d16ebd5e15d63e212745cb64">&#9670;&nbsp;</a></span>importBuffers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int libcamera::V4L2VideoDevice::importBuffers </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>count</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepare the device to import <em>count</em> buffers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">count</td><td>Number of buffers to prepare to import</td></tr>
  </table>
  </dd>
</dl>
<p>This function initializes the driver's buffer management to import buffers in DMABUF mode. It requests buffers from the driver, but doesn't allocate memory.</p>
<p>Upon successful return, the video device is ready to accept <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a594cd594686a8c1cf9ae8dba0b2a8a75" title="Queue a buffer to the video device if possible.">queueBuffer()</a> calls. The buffers to be imported are provided to <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a594cd594686a8c1cf9ae8dba0b2a8a75" title="Queue a buffer to the video device if possible.">queueBuffer()</a>, and may be supplied externally, or come from a previous <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#ae9c0b0a68f350725b63b73a6da5a2ecd" title="Export buffers from the video device.">exportBuffers()</a> call.</p>
<p>Device initialization performed by this function shall later be cleaned up with <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a191619c152f764e03bc461611f3fcd35" title="Release resources allocated by allocateBuffers() or importBuffers()">releaseBuffers()</a>. If buffers have already been allocated with <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a3a1a77e5e6c220ea7878e89485864a1c" title="Allocate and export buffers from the video device.">allocateBuffers()</a> or imported with <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a154f5283d16ebd5e15d63e212745cb64" title="Prepare the device to import count buffers.">importBuffers()</a>, this function returns -EBUSY.</p>
<dl class="section return"><dt>Returns</dt><dd>0 on success or a negative error code otherwise </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-EBUSY</td><td>buffers have already been allocated or imported </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a26a10690790249684e707cbfd1d83d77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26a10690790249684e707cbfd1d83d77">&#9670;&nbsp;</a></span>logPrefix()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string libcamera::V4L2VideoDevice::logPrefix </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve a string to be prefixed to the log message. </p>
<p>This function allows classes inheriting from the <a class="el" href="classlibcamera_1_1Loggable.html" title="Base class to support log message extensions.">Loggable</a> class to extend the logger with an object-specific prefix output right before the log message contents.</p>
<dl class="section return"><dt>Returns</dt><dd>A string to be prefixed to the log message </dd></dl>

<p>Implements <a class="el" href="classlibcamera_1_1Loggable.html#a4cc48b0ae7215ceb4bfae6f192b2b3ee">libcamera::Loggable</a>.</p>

</div>
</div>
<a id="a407058d16f2508b20b88408be08e8581"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a407058d16f2508b20b88408be08e8581">&#9670;&nbsp;</a></span>open() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int libcamera::V4L2VideoDevice::open </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open the V4L2 video device node and query its capabilities. </p>
<dl class="section return"><dt>Returns</dt><dd>0 on success or a negative error code otherwise </dd></dl>

</div>
</div>
<a id="a16bd7ee30d2be5f058539a781de4fbc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16bd7ee30d2be5f058539a781de4fbc7">&#9670;&nbsp;</a></span>open() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int libcamera::V4L2VideoDevice::open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlibcamera_1_1SharedFD.html">SharedFD</a>&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum v4l2_buf_type&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a V4L2 video device from an opened file handle and query its capabilities. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>The file descriptor to set </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>The device type to operate on</td></tr>
  </table>
  </dd>
</dl>
<p>This function opens a video device from the existing file descriptor <em>handle</em>. Like <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a407058d16f2508b20b88408be08e8581" title="Open the V4L2 video device node and query its capabilities.">open()</a>, this function queries the capabilities of the device, but handles it according to the given device <em>type</em> instead of determining its type from the capabilities. This can be used to force a given device type for memory-to-memory devices.</p>
<p>The file descriptor <em>handle</em> is duplicated, no reference to the original handle is kept.</p>
<dl class="section return"><dt>Returns</dt><dd>0 on success or a negative error code otherwise </dd></dl>

</div>
</div>
<a id="a594cd594686a8c1cf9ae8dba0b2a8a75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a594cd594686a8c1cf9ae8dba0b2a8a75">&#9670;&nbsp;</a></span>queueBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int libcamera::V4L2VideoDevice::queueBuffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlibcamera_1_1FrameBuffer.html">FrameBuffer</a> *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Queue a buffer to the video device if possible. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buffer</td><td>The buffer to be queued</td></tr>
  </table>
  </dd>
</dl>
<p>For capture video devices the <em>buffer</em> will be filled with data by the device. For output video devices the <em>buffer</em> shall contain valid data and will be processed by the device. Once the device has finished processing the buffer, it will be available for dequeue.</p>
<p>The best available V4L2 buffer is picked for <em>buffer</em> using the V4L2 buffer cache.</p>
<p>Note that <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a594cd594686a8c1cf9ae8dba0b2a8a75" title="Queue a buffer to the video device if possible.">queueBuffer()</a> will fail if the device is in the process of being stopped from a streaming state through <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a61998710615bdf7aa25a046c8565ed66" title="Stop the video stream.">streamOff()</a>.</p>
<p>V4L2 only allows upto VIDEO_MAX_FRAME frames to be queued at a time, so if we reach this limit, store the framebuffers in a pending queue, and try to enqueue once a buffer has been dequeued.</p>
<dl class="section return"><dt>Returns</dt><dd>0 on success or a negative error code otherwise </dd></dl>

</div>
</div>
<a id="a191619c152f764e03bc461611f3fcd35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a191619c152f764e03bc461611f3fcd35">&#9670;&nbsp;</a></span>releaseBuffers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int libcamera::V4L2VideoDevice::releaseBuffers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release resources allocated by <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a3a1a77e5e6c220ea7878e89485864a1c" title="Allocate and export buffers from the video device.">allocateBuffers()</a> or <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a154f5283d16ebd5e15d63e212745cb64" title="Prepare the device to import count buffers.">importBuffers()</a> </p>
<p>This function resets the driver's internal buffer management that was initialized by a previous call to <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a3a1a77e5e6c220ea7878e89485864a1c" title="Allocate and export buffers from the video device.">allocateBuffers()</a> or <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a154f5283d16ebd5e15d63e212745cb64" title="Prepare the device to import count buffers.">importBuffers()</a>. Any memory allocated by <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a3a1a77e5e6c220ea7878e89485864a1c" title="Allocate and export buffers from the video device.">allocateBuffers()</a> is freed. Buffer exported by <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#ae9c0b0a68f350725b63b73a6da5a2ecd" title="Export buffers from the video device.">exportBuffers()</a>, if any, are not affected. </p>

</div>
</div>
<a id="a36e54adf91b6690c75ce65e46758fc54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36e54adf91b6690c75ce65e46758fc54">&#9670;&nbsp;</a></span>setDequeueTimeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libcamera::V4L2VideoDevice::setDequeueTimeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlibcamera_1_1utils_1_1Duration.html">utils::Duration</a>&#160;</td>
          <td class="paramname"><em>timeout</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the dequeue timeout value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>The timeout value to be used</td></tr>
  </table>
  </dd>
</dl>
<p>Sets a timeout value, given by <em>timeout</em>, that will be used by a watchdog timer to ensure buffer dequeue events are periodically occurring when the device is streaming. The watchdog timer is only active when the device is streaming, so it is not necessary to disable it when the device stops streaming. The timeout value can be safely updated at any time.</p>
<p>If the timer expires, the <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a04808f0cc1ed33c6796a98fbdc8603f1">V4L2VideoDevice::dequeueTimeout</a> signal is emitted. This can typically be used by pipeline handlers to be notified of stalled devices.</p>
<p>Set <em>timeout</em> to 0 to disable the watchdog timer. </p>

</div>
</div>
<a id="ad67b47dd9327ce5df43350b80c083cca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad67b47dd9327ce5df43350b80c083cca">&#9670;&nbsp;</a></span>setFormat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int libcamera::V4L2VideoDevice::setFormat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlibcamera_1_1V4L2DeviceFormat.html">V4L2DeviceFormat</a> *&#160;</td>
          <td class="paramname"><em>format</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure an image format on the V4L2 video device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">format</td><td>The image format to apply to the video device</td></tr>
  </table>
  </dd>
</dl>
<p>Apply the supplied <em>format</em> to the video device, and return the actually applied format parameters, as <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#a91f2c87d4f30ad23259b7c460e144f63">V4L2VideoDevice::getFormat</a> would do.</p>
<dl class="section return"><dt>Returns</dt><dd>0 on success or a negative error code otherwise </dd></dl>

</div>
</div>
<a id="aa9eba638ac570ac4746017c6f10fafaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9eba638ac570ac4746017c6f10fafaa">&#9670;&nbsp;</a></span>setSelection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int libcamera::V4L2VideoDevice::setSelection </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classlibcamera_1_1Rectangle.html">Rectangle</a> *&#160;</td>
          <td class="paramname"><em>rect</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a selection rectangle <em>rect</em> for <em>target</em>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">target</td><td>The selection target defined by the V4L2_SEL_TGT_* flags </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">rect</td><td>The selection rectangle to be applied</td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000048">Todo:</a></b></dt><dd>Define a V4L2SelectionTarget enum for the selection target</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success or a negative error code otherwise </dd></dl>

</div>
</div>
<a id="a61998710615bdf7aa25a046c8565ed66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61998710615bdf7aa25a046c8565ed66">&#9670;&nbsp;</a></span>streamOff()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int libcamera::V4L2VideoDevice::streamOff </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop the video stream. </p>
<p>Buffers that are still queued when the video stream is stopped are immediately dequeued with their status set to <a class="el" href="structlibcamera_1_1FrameMetadata.html#a0ba5ab50b5169a1d94f6963c429c9846a1ca4a9a1fbd6225f498e4ab942da1ce4">FrameMetadata::FrameCancelled</a>, and the bufferReady signal is emitted for them. The order in which those buffers are dequeued is not specified.</p>
<p>This will be a no-op if the stream is not started in the first place and has no queued buffers.</p>
<dl class="section return"><dt>Returns</dt><dd>0 on success or a negative error code otherwise </dd></dl>

</div>
</div>
<a id="a588a5dc9d6f4c54c61136ac43ff9a8cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a588a5dc9d6f4c54c61136ac43ff9a8cc">&#9670;&nbsp;</a></span>streamOn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int libcamera::V4L2VideoDevice::streamOn </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the video stream. </p>
<dl class="section return"><dt>Returns</dt><dd>0 on success or a negative error code otherwise </dd></dl>

</div>
</div>
<a id="ac53da48385ab9a3798f7257a94a8ceb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac53da48385ab9a3798f7257a94a8ceb0">&#9670;&nbsp;</a></span>toV4L2PixelFormat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlibcamera_1_1V4L2PixelFormat.html">V4L2PixelFormat</a> libcamera::V4L2VideoDevice::toV4L2PixelFormat </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classlibcamera_1_1PixelFormat.html">PixelFormat</a> &amp;&#160;</td>
          <td class="paramname"><em>pixelFormat</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert <em><a class="el" href="classlibcamera_1_1PixelFormat.html" title="libcamera image pixel format">PixelFormat</a></em> to a <a class="el" href="classlibcamera_1_1V4L2PixelFormat.html" title="V4L2 pixel format FourCC wrapper.">V4L2PixelFormat</a> supported by the device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pixelFormat</td><td>The <a class="el" href="classlibcamera_1_1PixelFormat.html" title="libcamera image pixel format">PixelFormat</a> to convert</td></tr>
  </table>
  </dd>
</dl>
<p>Convert <em>pixelformat</em> to a V4L2 FourCC that is known to be supported by the video device.</p>
<p>A <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html" title="V4L2VideoDevice object and API.">V4L2VideoDevice</a> may support different V4L2 pixel formats that map the same <a class="el" href="classlibcamera_1_1PixelFormat.html" title="libcamera image pixel format">PixelFormat</a>. This is the case of the contiguous and non-contiguous variants of multiplanar formats, and with the V4L2 MJPEG and JPEG pixel formats. Converting a <a class="el" href="classlibcamera_1_1PixelFormat.html" title="libcamera image pixel format">PixelFormat</a> to a <a class="el" href="classlibcamera_1_1V4L2PixelFormat.html" title="V4L2 pixel format FourCC wrapper.">V4L2PixelFormat</a> may thus have multiple answers.</p>
<p>This function converts the <em>pixelFormat</em> using the list of V4L2 pixel formats that the <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html" title="V4L2VideoDevice object and API.">V4L2VideoDevice</a> supports. This guarantees that the returned <a class="el" href="classlibcamera_1_1V4L2PixelFormat.html" title="V4L2 pixel format FourCC wrapper.">V4L2PixelFormat</a> will be valid for the device. If multiple matches are still possible, contiguous variants are preferred. If the <em>pixelFormat</em> is not supported by the device, the function returns an invalid <a class="el" href="classlibcamera_1_1V4L2PixelFormat.html" title="V4L2 pixel format FourCC wrapper.">V4L2PixelFormat</a>.</p>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="classlibcamera_1_1V4L2PixelFormat.html" title="V4L2 pixel format FourCC wrapper.">V4L2PixelFormat</a> corresponding to <em>pixelFormat</em> if supported by the device, or an invalid <a class="el" href="classlibcamera_1_1V4L2PixelFormat.html" title="V4L2 pixel format FourCC wrapper.">V4L2PixelFormat</a> otherwise </dd></dl>

</div>
</div>
<a id="a1e75c2defe1fc70ec05e2cea8d8db4f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e75c2defe1fc70ec05e2cea8d8db4f0">&#9670;&nbsp;</a></span>tryFormat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int libcamera::V4L2VideoDevice::tryFormat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlibcamera_1_1V4L2DeviceFormat.html">V4L2DeviceFormat</a> *&#160;</td>
          <td class="paramname"><em>format</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try an image format on the V4L2 video device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">format</td><td>The image format to test applicability to the video device</td></tr>
  </table>
  </dd>
</dl>
<p>Try the supplied <em>format</em> on the video device without applying it, returning the format that would be applied. This is equivalent to <a class="el" href="classlibcamera_1_1V4L2VideoDevice.html#ad67b47dd9327ce5df43350b80c083cca" title="Configure an image format on the V4L2 video device.">setFormat()</a>, except that the device configuration is not changed.</p>
<dl class="section return"><dt>Returns</dt><dd>0 on success or a negative error code otherwise </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/libcamera/internal/<a class="el" href="v4l2__videodevice_8h_source.html">v4l2_videodevice.h</a></li>
<li>src/libcamera/v4l2_videodevice.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
