<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libcamera: libcamera::V4L2DeviceFormat Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libcamera
   &#160;<span id="projectnumber">v0.3.2+rpt20241101+7-aa9d3ab4</span>
   </div>
   <div id="projectbrief">Supporting cameras in Linux since 2019</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacelibcamera.html">libcamera</a></li><li class="navelem"><a class="el" href="classlibcamera_1_1V4L2DeviceFormat.html">V4L2DeviceFormat</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classlibcamera_1_1V4L2DeviceFormat-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">libcamera::V4L2DeviceFormat Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The V4L2 video device image format and sizes.  
 <a href="classlibcamera_1_1V4L2DeviceFormat.html#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for libcamera::V4L2DeviceFormat:</div>
<div class="dyncontent">
<div class="center"><img src="classlibcamera_1_1V4L2DeviceFormat__coll__graph.png" border="0" usemap="#alibcamera_1_1V4L2DeviceFormat_coll__map" alt="Collaboration graph"/></div>
<map name="alibcamera_1_1V4L2DeviceFormat_coll__map" id="alibcamera_1_1V4L2DeviceFormat_coll__map">
<area shape="rect" title="The V4L2 video device image format and sizes." alt="" coords="91,95,310,121"/>
<area shape="rect" href="classlibcamera_1_1V4L2PixelFormat.html" title="V4L2 pixel format FourCC wrapper." alt="" coords="5,5,209,32"/>
<area shape="rect" href="classlibcamera_1_1Size.html" title="Describe a two&#45;dimensional size." alt="" coords="234,5,357,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlibcamera_1_1V4L2DeviceFormat_1_1Plane.html">Plane</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Per-plane memory size information.  <a href="structlibcamera_1_1V4L2DeviceFormat_1_1Plane.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2b6c40ca15c05fdbcf2f9555027e7b16"><td class="memItemLeft" align="right" valign="top">const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2DeviceFormat.html#a2b6c40ca15c05fdbcf2f9555027e7b16">toString</a> () const</td></tr>
<tr class="memdesc:a2b6c40ca15c05fdbcf2f9555027e7b16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assemble and return a string describing the format.  <a href="classlibcamera_1_1V4L2DeviceFormat.html#a2b6c40ca15c05fdbcf2f9555027e7b16">More...</a><br /></td></tr>
<tr class="separator:a2b6c40ca15c05fdbcf2f9555027e7b16"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a1d9f472f571be3791f70e4cf44daae82"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlibcamera_1_1V4L2PixelFormat.html">V4L2PixelFormat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2DeviceFormat.html#a1d9f472f571be3791f70e4cf44daae82">fourcc</a></td></tr>
<tr class="memdesc:a1d9f472f571be3791f70e4cf44daae82"><td class="mdescLeft">&#160;</td><td class="mdescRight">The fourcc code describing the pixel encoding scheme.  <a href="classlibcamera_1_1V4L2DeviceFormat.html#a1d9f472f571be3791f70e4cf44daae82">More...</a><br /></td></tr>
<tr class="separator:a1d9f472f571be3791f70e4cf44daae82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa092819d6b6ca9e8caa0e4a83390b72e"><td class="memItemLeft" align="right" valign="top"><a id="aa092819d6b6ca9e8caa0e4a83390b72e"></a>
<a class="el" href="classlibcamera_1_1Size.html">Size</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2DeviceFormat.html#aa092819d6b6ca9e8caa0e4a83390b72e">size</a></td></tr>
<tr class="memdesc:aa092819d6b6ca9e8caa0e4a83390b72e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The image size in pixels. <br /></td></tr>
<tr class="separator:aa092819d6b6ca9e8caa0e4a83390b72e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad587e1cdee8d6075e7c57294125c0219"><td class="memItemLeft" align="right" valign="top">std::optional&lt; <a class="el" href="classlibcamera_1_1ColorSpace.html">ColorSpace</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2DeviceFormat.html#ad587e1cdee8d6075e7c57294125c0219">colorSpace</a></td></tr>
<tr class="memdesc:ad587e1cdee8d6075e7c57294125c0219"><td class="mdescLeft">&#160;</td><td class="mdescRight">The color space of the pixels.  <a href="classlibcamera_1_1V4L2DeviceFormat.html#ad587e1cdee8d6075e7c57294125c0219">More...</a><br /></td></tr>
<tr class="separator:ad587e1cdee8d6075e7c57294125c0219"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fbfab032fb2fdcc2112d3cbea4ef284"><td class="memItemLeft" align="right" valign="top">std::array&lt; <a class="el" href="structlibcamera_1_1V4L2DeviceFormat_1_1Plane.html">Plane</a>, 3 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2DeviceFormat.html#a8fbfab032fb2fdcc2112d3cbea4ef284">planes</a></td></tr>
<tr class="memdesc:a8fbfab032fb2fdcc2112d3cbea4ef284"><td class="mdescLeft">&#160;</td><td class="mdescRight">The per-plane memory size information.  <a href="classlibcamera_1_1V4L2DeviceFormat.html#a8fbfab032fb2fdcc2112d3cbea4ef284">More...</a><br /></td></tr>
<tr class="separator:a8fbfab032fb2fdcc2112d3cbea4ef284"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6973964a92da4100ebe978de03a05c9"><td class="memItemLeft" align="right" valign="top"><a id="ae6973964a92da4100ebe978de03a05c9"></a>
unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcamera_1_1V4L2DeviceFormat.html#ae6973964a92da4100ebe978de03a05c9">planesCount</a> = 0</td></tr>
<tr class="memdesc:ae6973964a92da4100ebe978de03a05c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of valid data planes. <br /></td></tr>
<tr class="separator:ae6973964a92da4100ebe978de03a05c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The V4L2 video device image format and sizes. </p>
<p>This class describes the image format and resolution to be programmed on a V4L2 video device. The image format is defined by a fourcc code (as specified by the V4L2 API with the V4L2_PIX_FMT_* macros), a resolution (width and height) and one to three planes with configurable line stride and a total per-plane size in bytes.</p>
<p>Image formats, as defined by the V4L2 APIs, are categorised as packed, semi-planar and planar, and describe the layout of the image pixel components stored in memory.</p>
<p>Packed image formats store pixel components one after the other, in a contiguous memory area. Examples of packed image formats are YUYV permutations, RGB with different pixel sub-sampling ratios such as RGB565 or RGB666 or Raw-Bayer formats such as SRGGB8 or SGRBG12.</p>
<p>Semi-planar and planar image formats store the pixel components in separate and possibly non-contiguous memory areas, named planes, whose sizes depend on the pixel components sub-sampling ratios, which are defined by the format. Semi-planar formats use two planes to store pixel components and notable examples of such formats are the NV12 and NV16 formats, while planar formats use three planes to store pixel components and notable examples are YUV422 and YUV420.</p>
<p>Image formats supported by the V4L2 API are defined and described in Section number 2 of the "Part I - Video for Linux API" chapter of the "Linux Media
Infrastructure userspace API", part of the Linux kernel documentation.</p>
<p>In the context of this document, packed image formats are referred to as "packed formats" and semi-planar and planar image formats are referred to as "planar formats".</p>
<p>V4L2 also defines two different sets of APIs to work with devices that store planes in contiguous or separate memory areas. They are named "Single-plane
APIs" and "Multi-plane APIs" respectively and are documented in Section 2.1 and Section 2.2 of the above mentioned "Part I - Video for Linux API" documentation.</p>
<p>The single-plane API allows, among other parameters, the configuration of the image resolution, the pixel format and the stride length. In that case the stride applies to all planes (possibly sub-sampled). The multi-plane API allows configuring the resolution, the pixel format and a per-plane stride length and total size.</p>
<p>Packed image formats, which occupy a single memory area, are easily described through the single-plane API. When used on a video device that implements the multi-plane API, only the size and stride information contained in the first plane are taken into account.</p>
<p>Planar image formats, which occupy distinct memory areas, are easily described through the multi-plane APIs. When used on a video device that implements the single-plane API, all planes are stored one after the other in a contiguous memory area, and it is not possible to configure per-plane stride length and size, but only a global stride length which is applied to all planes.</p>
<p>The <a class="el" href="classlibcamera_1_1V4L2DeviceFormat.html" title="The V4L2 video device image format and sizes.">V4L2DeviceFormat</a> class describes both packed and planar image formats, regardless of the API type (single or multi plane) implemented by the video device the format has to be applied to. The total size and bytes per line of images represented with packed formats are configured using the first entry of the <a class="el" href="classlibcamera_1_1V4L2DeviceFormat.html#a8fbfab032fb2fdcc2112d3cbea4ef284" title="The per-plane memory size information.">V4L2DeviceFormat::planes</a> array, while the per-plane size and per-plane stride length of images represented with planar image formats are configured using the opportune number of entries of the <a class="el" href="classlibcamera_1_1V4L2DeviceFormat.html#a8fbfab032fb2fdcc2112d3cbea4ef284" title="The per-plane memory size information.">V4L2DeviceFormat::planes</a> array, as prescribed by the image format definition (semi-planar formats use 2 entries, while planar formats use the whole 3 entries). The number of valid entries of the <a class="el" href="classlibcamera_1_1V4L2DeviceFormat.html#a8fbfab032fb2fdcc2112d3cbea4ef284" title="The per-plane memory size information.">V4L2DeviceFormat::planes</a> array is defined by the <a class="el" href="classlibcamera_1_1V4L2DeviceFormat.html#ae6973964a92da4100ebe978de03a05c9" title="The number of valid data planes.">V4L2DeviceFormat::planesCount</a> value. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a2b6c40ca15c05fdbcf2f9555027e7b16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b6c40ca15c05fdbcf2f9555027e7b16">&#9670;&nbsp;</a></span>toString()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string libcamera::V4L2DeviceFormat::toString </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Assemble and return a string describing the format. </p>
<dl class="section return"><dt>Returns</dt><dd>A string describing the <a class="el" href="classlibcamera_1_1V4L2DeviceFormat.html" title="The V4L2 video device image format and sizes.">V4L2DeviceFormat</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ad587e1cdee8d6075e7c57294125c0219"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad587e1cdee8d6075e7c57294125c0219">&#9670;&nbsp;</a></span>colorSpace</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">libcamera::V4L2DeviceFormat::colorSpace</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The color space of the pixels. </p>
<p>The color space of the image. When setting the format this may be unset, in which case the driver gets to use its default color space. After being set, this value should contain the color space that was actually used. If this value is unset, then the color space chosen by the driver could not be represented by the <a class="el" href="classlibcamera_1_1ColorSpace.html" title="Class to describe a color space.">ColorSpace</a> class (and should probably be added).</p>
<p>It is up to the pipeline handler or application to check if the resulting color space is acceptable. </p>

</div>
</div>
<a id="a1d9f472f571be3791f70e4cf44daae82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d9f472f571be3791f70e4cf44daae82">&#9670;&nbsp;</a></span>fourcc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">libcamera::V4L2DeviceFormat::fourcc</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The fourcc code describing the pixel encoding scheme. </p>
<p>The fourcc code, as defined by the V4L2 API with the V4L2_PIX_FMT_* macros, that identifies the image format pixel encoding scheme. </p>

</div>
</div>
<a id="a8fbfab032fb2fdcc2112d3cbea4ef284"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fbfab032fb2fdcc2112d3cbea4ef284">&#9670;&nbsp;</a></span>planes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">libcamera::V4L2DeviceFormat::planes</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The per-plane memory size information. </p>
<p>Images are stored in memory in one or more data planes. Each data plane has a specific line stride and memory size, which could differ from the image visible sizes to accommodate padding at the end of lines and end of planes. Only the first <a class="el" href="classlibcamera_1_1V4L2DeviceFormat.html#ae6973964a92da4100ebe978de03a05c9">planesCount</a> entries are considered valid. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/libcamera/internal/<a class="el" href="v4l2__videodevice_8h_source.html">v4l2_videodevice.h</a></li>
<li>src/libcamera/v4l2_videodevice.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
