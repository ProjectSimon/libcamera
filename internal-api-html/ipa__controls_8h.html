<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libcamera: include/libcamera/ipa/ipa_controls.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libcamera
   &#160;<span id="projectnumber">v0.3.2+rpt20241101+7-aa9d3ab4</span>
   </div>
   <div id="projectbrief">Supporting cameras in Linux since 2019</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_a19b8593fbb1ff05f8d3ffdb81ecf984.html">libcamera</a></li><li class="navelem"><a class="el" href="dir_53104a4fa45d4038c33e19a41c96f7e6.html">ipa</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a>  </div>
  <div class="headertitle">
<div class="title">ipa_controls.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Type definitions for serialized controls.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ipa_controls.h:</div>
<div class="dyncontent">
<div class="center"><img src="ipa__controls_8h__incl.png" border="0" usemap="#ainclude_2libcamera_2ipa_2ipa__controls_8h" alt=""/></div>
<map name="ainclude_2libcamera_2ipa_2ipa__controls_8h" id="ainclude_2libcamera_2ipa_2ipa__controls_8h">
<area shape="rect" title="Type definitions for serialized controls." alt="" coords="5,5,168,47"/>
<area shape="rect" title=" " alt="" coords="51,95,122,121"/>
</map>
</div>
</div>
<p><a href="ipa__controls_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlibcamera_1_1ipa__controls__header.html">libcamera::ipa_controls_header</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serialized control packet header.  <a href="structlibcamera_1_1ipa__controls__header.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlibcamera_1_1ipa__control__value__entry.html">libcamera::ipa_control_value_entry</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Description of a serialized <a class="el" href="classlibcamera_1_1ControlValue.html" title="Abstract type representing the value of a control.">ControlValue</a> entry.  <a href="structlibcamera_1_1ipa__control__value__entry.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlibcamera_1_1ipa__control__info__entry.html">libcamera::ipa_control_info_entry</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Description of a serialized <a class="el" href="classlibcamera_1_1ControlInfo.html" title="Describe the limits of valid values for a Control.">ControlInfo</a> entry.  <a href="structlibcamera_1_1ipa__control__info__entry.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacelibcamera"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelibcamera.html">libcamera</a></td></tr>
<tr class="memdesc:namespacelibcamera"><td class="mdescLeft">&#160;</td><td class="mdescRight">Top-level libcamera namespace. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab0636e3df8b5a856b6949abc81bc80d1"><td class="memItemLeft" align="right" valign="top"><a id="ab0636e3df8b5a856b6949abc81bc80d1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipa__controls_8h.html#ab0636e3df8b5a856b6949abc81bc80d1">IPA_CONTROLS_FORMAT_VERSION</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ab0636e3df8b5a856b6949abc81bc80d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current control serialization format version. <br /></td></tr>
<tr class="separator:ab0636e3df8b5a856b6949abc81bc80d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a15081aa9ebc49a6db6aff905354d1366"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelibcamera.html#a15081aa9ebc49a6db6aff905354d1366">libcamera::ipa_controls_id_map_type</a> { <a class="el" href="namespacelibcamera.html#a15081aa9ebc49a6db6aff905354d1366a6bfc823d9747bf090622a60df13f42e8">libcamera::IPA_CONTROL_ID_MAP_CONTROLS</a>
, <a class="el" href="namespacelibcamera.html#a15081aa9ebc49a6db6aff905354d1366a9ca2664e1852fedc0369b35f8d9cb872">libcamera::IPA_CONTROL_ID_MAP_PROPERTIES</a>
, <a class="el" href="namespacelibcamera.html#a15081aa9ebc49a6db6aff905354d1366a5de6e8e5fcefc7d8e854ec3c8c3e5bf1">libcamera::IPA_CONTROL_ID_MAP_V4L2</a>
 }</td></tr>
<tr class="memdesc:a15081aa9ebc49a6db6aff905354d1366"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enumerates the different control id map types.  <a href="namespacelibcamera.html#a15081aa9ebc49a6db6aff905354d1366">More...</a><br /></td></tr>
<tr class="separator:a15081aa9ebc49a6db6aff905354d1366"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Type definitions for serialized controls. </p>
<p>This file defines binary formats to store ControlList and ControlInfoMap instances in contiguous, self-contained memory areas called control packets. It describes the layout of the packets through a set of C structures. These formats shall be used when serializing ControlList and ControlInfoMap to transfer them through the IPA C interface and IPA IPC transports.</p>
<p>A control packet contains a list of entries, each of them describing a single control info or control value. The packet starts with a fixed-size header described by the ipa_controls_header structure, followed by an array of fixed-size entries. Each entry is associated with data, stored either directly in the entry, or in a data section after the entries array.</p>
<p>The following diagram describes the layout of the ControlList packet.</p>
<div class="fragment"><div class="line">          +-------------------------+    .                      .</div>
<div class="line"> Header / | ipa_controls_header     |    |                      |</div>
<div class="line">        | |                         |    |                      |</div>
<div class="line">        \ |                         |    |                      |</div>
<div class="line">          +-------------------------+    |                      |</div>
<div class="line">        / | ipa_control_value_entry |    | hdr.data_offset      |</div>
<div class="line">        | | #0                      |    |                      |</div>
<div class="line">Control | +-------------------------+    |                      |</div>
<div class="line">  value | | ...                     |    |                      |</div>
<div class="line">entries | +-------------------------+    |                      |</div>
<div class="line">        | | ipa_control_value_entry |    |             hdr.size |</div>
<div class="line">        \ | #hdr.entries - 1        |    |                      |</div>
<div class="line">          +-------------------------+    |                      |</div>
<div class="line">          | empty space (optional)  |    |                      |</div>
<div class="line">          +-------------------------+ &lt;--´  .                   |</div>
<div class="line">        / | ...                     |       | entry[n].offset   |</div>
<div class="line">   Data | | ...                     |       |                   |</div>
<div class="line">section | | value data <span class="keywordflow">for</span> entry #n | &lt;-----´                   |</div>
<div class="line">        \ | ...                     |                           |</div>
<div class="line">          +-------------------------+                           |</div>
<div class="line">          | empty space (optional)  |                           |</div>
<div class="line">          +-------------------------+ &lt;-------------------------´</div>
</div><!-- fragment --><p>The packet header contains the size of the packet, the number of entries, and the offset from the beginning of the packet to the data section. The packet entries array immediately follows the header. The data section starts at the offset ipa_controls_header::data_offset from the beginning of the packet, and shall be aligned to a multiple of 8 bytes.</p>
<p>Entries are described by the ipa_control_value_entry structure. They contain the numerical ID of the control, its type, and the number of control values.</p>
<p>The control values are stored in the data section in the platform's native format. The ipa_control_value_entry::offset field stores the offset from the beginning of the data section to the values.</p>
<p>All control values in the data section shall be stored in the same order as the respective control entries, shall be aligned to a multiple of 8 bytes, and shall be contiguous in memory.</p>
<p>Empty spaces may be present between the end of the entries array and the data section, and after the data section. They shall be ignored when parsing the packet.</p>
<p>The following diagram describes the layout of the ControlInfoMap packet.</p>
<div class="fragment"><div class="line">          +-------------------------+    .                      .</div>
<div class="line"> Header / | ipa_controls_header     |    |                      |</div>
<div class="line">        | |                         |    |                      |</div>
<div class="line">        \ |                         |    |                      |</div>
<div class="line">          +-------------------------+    |                      |</div>
<div class="line">        / | ipa_control_info_entry  |    | hdr.data_offset      |</div>
<div class="line">        | | #0                      |    |                      |</div>
<div class="line">Control | +-------------------------+    |                      |</div>
<div class="line">   info | | ...                     |    |                      |</div>
<div class="line">entries | +-------------------------+    |                      |</div>
<div class="line">        | | ipa_control_info_entry  |    |             hdr.size |</div>
<div class="line">        \ | #hdr.entries - 1        |    |                      |</div>
<div class="line">          +-------------------------+    |                      |</div>
<div class="line">          | empty space (optional)  |    |                      |</div>
<div class="line">          +-------------------------+ &lt;--´  .                   |</div>
<div class="line">        / | ...                     |       | entry[n].offset   |</div>
<div class="line">   Data | | ...                     |       |                   |</div>
<div class="line">section | | info data <span class="keywordflow">for</span> entry #n  | &lt;-----´                   |</div>
<div class="line">        \ | ...                     |                           |</div>
<div class="line">          +-------------------------+                           |</div>
<div class="line">          | empty space (optional)  |                           |</div>
<div class="line">          +-------------------------+ &lt;-------------------------´</div>
</div><!-- fragment --><p>The packet header is identical to the ControlList packet header.</p>
<p>Entries are described by the ipa_control_info_entry structure. They contain the numerical ID and type of the control. The control info data is stored in the data section as described by the following diagram.</p>
<div class="fragment"><div class="line">          +-------------------------+       .</div>
<div class="line">        / | ...                     |       | entry[n].offset</div>
<div class="line">        | +-------------------------+ &lt;-----´</div>
<div class="line">        | | minimum value (#n)      | \</div>
<div class="line">   Data | +-------------------------+ |</div>
<div class="line">section | | maximum value (#n)      | | Entry #n</div>
<div class="line">        | +-------------------------+ |</div>
<div class="line">        | | <span class="keywordflow">default</span> value (#n)      | /</div>
<div class="line">        | +-------------------------+</div>
<div class="line">        \ | ...                     |</div>
<div class="line">          +-------------------------+</div>
</div><!-- fragment --><p>The minimum, maximum and default values are stored in the platform's native data format. The ipa_control_info_entry::offset field stores the offset from the beginning of the data section to the info data.</p>
<p>Info data in the data section shall be stored in the same order as the entries array, shall be aligned to a multiple of 8 bytes, and shall be contiguous in memory.</p>
<p>As for the ControlList packet, empty spaces may be present between the end of the entries array and the data section, and after the data section. They shall be ignored when parsing the packet. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
